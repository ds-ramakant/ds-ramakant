---
title: "What a wonderful 'wordle'!"
author: "Ramakant"
date: '2022-04-05'
slug: what-a-wonderful-wordle
categories: R
tags: wordle
subtitle: Ek Choti Kadam
summary: 'Frequency analysis of the official Wordle list'
authors: []
lastmod: '2022-04-05T16:15:24+05:30'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []

---

Who ever thought that a bunch of black and green boxes would bring out the <a href = "https://www.merriam-webster.com/dictionary/logophile">logophile</a> in us all? With friends and family groups sharing their progress, I find this to be an entertaining mind-puzzle to kickstart the day. 

And I was not alone in fascination for 5 letter words. Wordle has tickled the fascination of many in the data science community. I foun <a href = "https://rviews.rstudio.com/2022/02/21/wordle-data-analysis/">Arthur Holtz's lucid breakdown of the Wordle dataset</a> quite interesting. Of course, there is 3B1B's incredibly detailed videos on applying Information Theory to this 6-by-5 grid. (<a href = "https://youtu.be/v68zYyaEmEA">original video</a> as well as the <a href = https://youtu.be/fRed0Xmc2Wg>follow-up errata</a>)

Others have simulated the wordle game (<a href= "https://datascienceplus.com/how-i-selected-my-starting-word-for-wordle-using-simulations-and-r/">like here</a>) or even solved it for you (<a href = "https://blog.ephorie.de/wordle-solve-wordle-with-r">like this blog</a>). I've read at least (<a href = "https://theconversation.com/want-to-master-wordle-heres-the-best-strategy-for-your-first-guess-176325">one blog post</a>)  that has an academic take on the matter.

Fortunately for the reader, none of the above will be attempted by me. My inspiration comes from <a href = "https://towardsdatascience.com/wordle-a-frequency-analysis-approach-9989c3d7be5f">Gerry Chng's Frequency Analysis Approach</a> where I've tried to understand the most commonly occuring letters in the official word list by position by considering a ranking mechanism

## What is a wordle?

The game rules are fairly simple:

1. You need to guess a 5-letter word. One new word is given every day
2. You are given 6 guesses
3. After every guess, each square is coded by a color
      + GREY: chosen letter is not in the word
      + YELLOW: chosen letter is in the word by wrong position
      + GREEN: chosen letter is in the word and in the correct position
4. Repetition of letters is allowed

That's it!

In my opinion, one of the reasons for the game going viral is the way the results are shared. You've possibly seen something like this floating around:
![sample Wordle share](E:\Personal\G Drive\Weekends in Mumbai\Blog\Rstudio-WIP-folder\blog_v02\ds-ramakant\content\post\2022-04-05-what-a-wonderful-wordle\Wordle sample share.jpg){width=250px}

...And if your family too has been bitten hard by the Wordle bug, then you would be familiar with group messages like this! 

![](E:\Personal\G Drive\Weekends in Mumbai\Blog\Rstudio-WIP-folder\blog_v02\ds-ramakant\content\post\2022-04-05-what-a-wonderful-wordle\wordle share whatsapp.jpg){width=100px}

## Frequency analysis 

[Arthur Hotlz's blog](https://rviews.rstudio.com/2022/02/21/wordle-data-analysis/ ) is a good place to start for extracting and loading the Official Wordle list. After parsing and cleaning the data, here's all the words broken down into a single rectangular dataframe `word_list` 

```{r extracting and cleaning,  warning=FALSE}

knitr::opts_chunk$set(warning = FALSE, message = FALSE) 

suppressMessages({ 
library(httr)
library(dplyr)
library(stringr)
library(ggplot2)
library(ggthemes)
library(scales)
library(tidyr)
library(tibble)
library(kableExtra)
theme_set(theme_light())
})

url <- "https://www.nytimes.com/games/wordle/main.18637ca1.js"
wordle_script_text <- GET(url) %>% 
  content(as = "text", encoding = "UTF-8")
word_list = substr(
  wordle_script_text,
  # cigar is the first word
  str_locate(wordle_script_text, "cigar")[,"start"],
  # shave is the last word
  str_locate(wordle_script_text, "shave")[,"end"]) %>%
  str_remove_all("\"") %>%
  str_split(",") %>%
  data.frame() %>%
  select(word = 1) %>%
  mutate(word = toupper(word))

head(word_list,10)
```

Modification to the above is another dataframe with each of the characters separated into columns which we'll call `position_word_list` 

*The line `select(-x)` removes the empty column that is created due to the `seperate()` function*
```{r positio_word_list}

position_word_list <- word_list %>% 
  separate(word, 
           sep = "", 
           into = c("x","p1","p2","p3","p4","p5")) %>% 
  select(-x)

head(position_word_list,10)


```

Now onto some frequency analysis. Here's a breakdown of all the letters in the wordle list sorted by number of occurrences stored in `letter_list` and creating a simple bar graph. 

```{r graph, warning=FALSE}
letter_list <- word_list %>%
  as.character() %>%
  str_split("") %>% 
  as.data.frame() %>% 
  select(w_letter = 1) %>% 
  filter(row_number()!=1) %>%
  filter(w_letter %in% LETTERS) %>% 
  mutate(type = case_when(w_letter %in% c("A","E","I","O","U") ~ "vowel",
                          T ~ "consonant")) %>% 
  group_by(w_letter, type) %>% 
  summarise(freq = n()) %>% 
  arrange(desc(freq))

letter_list %>% ungroup() %>% 
  ggplot(aes(x = reorder(w_letter, -freq), y = freq))+
  geom_col(aes(fill = type))+
  scale_y_continuous(labels = comma)+
  geom_text(aes(label = freq), 
            size = 3)+
  labs(x = "Letter", y = "Frequency",
       title = "Frequency of words in Official Wordle list")


```
This is interesting. Now I'm interested in finding out the top words by each position. To do this, I created a single table that provides me with the frequency of occurrences by position for each letter called `freq_table`. To iterate this process across all the 5 places, I used a `for` loop.


```{r frequency table, warning=FALSE}


#declaring null table
freq_table <- tibble(alpha = LETTERS)

for(i in 1:5){
  
    test <- position_word_list %>% 
    select(all_of(i)) %>%
# group_by_at() used for column index ID
    group_by_at(1) %>% 
    summarise(f = n()) %>% 
    arrange(desc(f)) %>% 
#first column returns p1, p2.. etc. Needs to be standardised while running left_join()
    rename(a = 1) 

#adding the freq values to a new dataframe
    freq_table <- freq_table %>%
    left_join(test, by = c("alpha" = "a")) 

#renaming column name to reflect the position number
    colnames(freq_table)[1+i] = paste0("p",i)
    rm(test)

}

#replacing NA with zero
freq_table[is.na(freq_table)] <- 0 

head(freq_table)
```

```{r postion wise graph, warning=FALSE}

freq_table_long10 <- freq_table %>% 
  pivot_longer(cols = !alpha, names_to = "position", values_to = "freq") %>% 
  select(position, alpha, freq) %>% 
  arrange(position, -freq) %>% 
  group_by(position) %>% 
  slice_head(n = 10)



```

```{r}

library(kableExtra)
## Not run: 
# Specify table size by pixels
kable(cbind(mtcars, mtcars), "html") %>%
    kable_styling() %>%
    scroll_box(width = "500px", height = "200px")

# Specify by percent
kable(cbind(mtcars, mtcars), "html") %>%
    kable_styling() %>%
    scroll_box(width = "100%", height = "200px")
```


